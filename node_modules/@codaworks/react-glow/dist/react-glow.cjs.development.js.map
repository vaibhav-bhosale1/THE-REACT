{"version":3,"file":"react-glow.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { CSSProperties, useEffect, useRef } from 'react'\r\nimport { GlowCaptureProps, GlowProps } from './index.types'\r\n\r\nexport const GlowCapture = (props: GlowCaptureProps) => {\r\n    const {\r\n        className = '',\r\n        size = 400,\r\n        ...rest\r\n    } = props\r\n\r\n    const element = useRef<HTMLDivElement>(null)\r\n\r\n    useEffect(() => {\r\n        const move = (e: PointerEvent) => {\r\n            if (e.pointerType === 'mouse') {\r\n                requestAnimationFrame(() => {\r\n                    if (!element.current)\r\n                        return\r\n\r\n                    const bounds = element.current.getBoundingClientRect()\r\n\r\n                    const x = e.clientX - bounds.left\r\n                    const y = e.clientY - bounds.top\r\n\r\n                    element.current.style.setProperty('--glow-x', `${x}px`)\r\n                    element.current.style.setProperty('--glow-y', `${y}px`)\r\n                })\r\n            }\r\n        }\r\n\r\n        const leave = () => {\r\n            element.current?.style.removeProperty('--glow-x')\r\n            element.current?.style.removeProperty('--glow-y')\r\n        }\r\n\r\n        element.current?.addEventListener('pointermove', move, { passive: true })\r\n        element.current?.addEventListener('pointerleave', leave, { passive: true })\r\n        return () => {\r\n            element.current?.removeEventListener('pointermove', move)\r\n            element.current?.removeEventListener('pointerleave', leave)\r\n        }\r\n    }, [])\r\n\r\n    return <div ref={element}\r\n        className={`glow-capture ${className}`}\r\n        style={{\r\n            position: 'relative',\r\n            '--glow-size': `${size}px`\r\n        } as CSSProperties}\r\n        {...rest} />\r\n}\r\n\r\n\r\nconst mask = `\r\nradial-gradient(var(--glow-size) var(--glow-size) at calc(var(--glow-x, -99999px) - var(--glow-left, 0px))\r\ncalc(var(--glow-y, -99999px) - var(--glow-top, 0px)), #000000 1%, transparent 50%)\r\n`\r\n\r\n\r\nexport const Glow = (props: GlowProps) => {\r\n\r\n    const {\r\n        className = '',\r\n        style,\r\n        children,\r\n        color = '#f50057',\r\n        debug = false,\r\n        ...rest\r\n    } = props\r\n\r\n\r\n    const element = useRef<HTMLDivElement>(null)\r\n\r\n    useEffect(() => {\r\n        element.current?.style.setProperty('--glow-top', `${element.current?.offsetTop}px`)\r\n        element.current?.style.setProperty('--glow-left', `${element.current?.offsetLeft}px`)\r\n    })\r\n\r\n    useEffect(() => {\r\n        const observer = new ResizeObserver(() => {\r\n            requestAnimationFrame(() => {\r\n                element.current?.style.setProperty('--glow-top', `${element.current?.offsetTop}px`)\r\n                element.current?.style.setProperty('--glow-left', `${element.current?.offsetLeft}px`)\r\n            })\r\n        })\r\n\r\n        const capture = element.current?.closest('.glow-capture')\r\n        if (capture)\r\n            observer.observe(capture)\r\n\r\n\r\n        return () => observer.disconnect()\r\n    }, [])\r\n\r\n    return <div ref={element} className='glow' style={{ display: 'grid' }}>\r\n        <div className={className}\r\n            style={{\r\n                ...style,\r\n                gridArea: '1/1/1/1'\r\n            }}\r\n            {...rest}>\r\n            {children}\r\n        </div>\r\n        <div className={`glow-mask ${className}`}\r\n            // @ts-ignore\r\n            glow='true'\r\n            style={{\r\n                ...style,\r\n                '--glow-color': color,\r\n                gridArea: '1/1/1/1',\r\n                pointerEvents: 'none',\r\n                mask: debug ? undefined : mask,\r\n                WebkitMask: debug ? undefined : mask\r\n            } as CSSProperties}\r\n            {...rest}>\r\n            {children}\r\n        </div>\r\n    </div>\r\n}\r\n"],"names":["GlowCapture","props","_props$className","className","_props$size","size","rest","_objectWithoutPropertiesLoose","_excluded","element","useRef","useEffect","move","e","pointerType","requestAnimationFrame","current","bounds","getBoundingClientRect","x","clientX","left","y","clientY","top","style","setProperty","leave","_element$current","removeProperty","_element$current2","_element$current3","addEventListener","passive","_element$current4","_element$current5","removeEventListener","_element$current6","React","ref","position","mask","Glow","_props$className2","children","_props$color","color","_props$debug","debug","_excluded2","_element$current7","_element$current8","offsetTop","_element$current9","_element$current10","offsetLeft","observer","ResizeObserver","_element$current11","_element$current12","_element$current13","_element$current14","capture","_element$current15","closest","observe","disconnect","display","_extends","gridArea","glow","pointerEvents","undefined","WebkitMask"],"mappings":"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"}